<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Empire Reigns — Cozy Idle</title>

  <script>
    window.BUILD = "ER-20260109c";
  </script>

  <link rel="stylesheet" href="./styles.css?v=ER-20260109c" />
</head>

<body>
  <div class="world">

    <!-- Cozy illustrated background (vector “art”) -->
    <svg class="scene" viewBox="0 0 1400 720" preserveAspectRatio="xMidYMid slice" aria-hidden="true">
      <defs>
        <linearGradient id="skyGrad" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0" stop-color="#101a2a"/>
          <stop offset=".55" stop-color="#0b101b"/>
          <stop offset="1" stop-color="#07080c"/>
        </linearGradient>

        <radialGradient id="sunGlow" cx="20%" cy="18%" r="40%">
          <stop offset="0" stop-color="rgba(255,230,170,.30)"/>
          <stop offset=".55" stop-color="rgba(255,230,170,.14)"/>
          <stop offset="1" stop-color="rgba(255,230,170,0)"/>
        </radialGradient>

        <radialGradient id="moonGlow" cx="78%" cy="18%" r="42%">
          <stop offset="0" stop-color="rgba(170,220,255,.22)"/>
          <stop offset=".55" stop-color="rgba(170,220,255,.10)"/>
          <stop offset="1" stop-color="rgba(170,220,255,0)"/>
        </radialGradient>

        <filter id="soft" x="-20%" y="-20%" width="140%" height="140%">
          <feGaussianBlur stdDeviation="1.1"/>
        </filter>

        <linearGradient id="hillBack" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0" stop-color="rgba(85,145,125,.32)"/>
          <stop offset="1" stop-color="rgba(20,40,32,.40)"/>
        </linearGradient>
        <linearGradient id="hillFront" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0" stop-color="rgba(120,200,155,.22)"/>
          <stop offset="1" stop-color="rgba(20,35,28,.46)"/>
        </linearGradient>

        <linearGradient id="townGlow" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0" stop-color="rgba(255,245,220,.10)"/>
          <stop offset="1" stop-color="rgba(255,245,220,0)"/>
        </linearGradient>
      </defs>

      <rect x="0" y="0" width="1400" height="720" fill="url(#skyGrad)"/>
      <rect x="0" y="0" width="1400" height="420" fill="url(#sunGlow)"/>
      <rect x="0" y="0" width="1400" height="420" fill="url(#moonGlow)"/>

      <g opacity=".55">
        <circle cx="140" cy="90" r="1.4" fill="rgba(255,255,255,.35)"/>
        <circle cx="240" cy="140" r="1.0" fill="rgba(255,255,255,.28)"/>
        <circle cx="360" cy="80" r="1.2" fill="rgba(255,255,255,.26)"/>
        <circle cx="520" cy="120" r="1.1" fill="rgba(255,255,255,.22)"/>
        <circle cx="690" cy="90" r="1.0" fill="rgba(255,255,255,.24)"/>
        <circle cx="880" cy="130" r="1.2" fill="rgba(255,255,255,.25)"/>
        <circle cx="1010" cy="85" r="1.1" fill="rgba(255,255,255,.22)"/>
        <circle cx="1180" cy="150" r="1.2" fill="rgba(255,255,255,.24)"/>
        <circle cx="1260" cy="90" r="1.0" fill="rgba(255,255,255,.20)"/>
      </g>

      <g opacity=".22" filter="url(#soft)">
        <path d="M140 170c40-28 120-34 160 0 30-20 70-18 94 2 40 34-20 88-110 78-30 22-120 20-160-18-38-35-30-50 16-62z" fill="rgba(255,255,255,.55)"/>
        <path d="M860 160c55-34 150-38 205 3 44-22 92-14 112 12 28 38-28 88-140 76-34 26-126 26-176-10-44-32-34-58 -1-81z" fill="rgba(255,255,255,.45)"/>
      </g>

      <path d="M-20 420
               C 120 300, 300 340, 420 410
               C 540 480, 720 470, 860 395
               C 1040 300, 1180 320, 1420 440
               L 1420 720 L -20 720 Z"
            fill="url(#hillBack)" opacity=".95"/>

      <path d="M-20 470
               C 110 380, 320 420, 460 500
               C 610 585, 770 560, 930 485
               C 1100 410, 1240 430, 1420 520
               L 1420 720 L -20 720 Z"
            fill="url(#hillFront)" opacity=".95"/>

      <g opacity=".45">
        <rect x="190" y="460" width="40" height="38" rx="8" fill="rgba(255,255,255,.10)"/>
        <rect x="240" y="444" width="50" height="54" rx="10" fill="rgba(255,255,255,.08)"/>
        <rect x="304" y="470" width="34" height="28" rx="8" fill="rgba(255,255,255,.10)"/>
        <rect x="360" y="452" width="52" height="46" rx="10" fill="rgba(255,255,255,.08)"/>
        <rect x="442" y="470" width="30" height="28" rx="8" fill="rgba(255,255,255,.10)"/>

        <rect x="870" y="460" width="44" height="40" rx="9" fill="rgba(255,255,255,.09)"/>
        <rect x="922" y="444" width="56" height="56" rx="11" fill="rgba(255,255,255,.08)"/>
        <rect x="990" y="470" width="34" height="30" rx="8" fill="rgba(255,255,255,.10)"/>
        <rect x="1042" y="452" width="56" height="48" rx="10" fill="rgba(255,255,255,.08)"/>
        <rect x="1124" y="470" width="30" height="28" rx="8" fill="rgba(255,255,255,.10)"/>

        <rect x="0" y="508" width="1400" height="120" fill="url(#townGlow)"/>
      </g>
    </svg>

    <div class="groundBand"></div>
    <div class="road"></div>

    <div class="sign">EMPIRE REIGNS<span id="sceneNote">starting out</span></div>

    <!-- BUILDINGS -->
    <div class="buildings" aria-label="World buildings">
      <div class="building b-office" id="bOffice" role="button" tabindex="0" aria-label="Office" data-lvl="1"></div>
      <div class="building b-warehouse" id="bWarehouse" role="button" tabindex="0" aria-label="Warehouse" data-lvl="1"></div>
      <div class="building b-garage" id="bGarage" role="button" tabindex="0" aria-label="Workshop" data-lvl="1"></div>
      <div class="building b-shop" id="bShop" role="button" tabindex="0" aria-label="Market" data-lvl="1"></div>
    </div>

    <!-- PEOPLE -->
    <div class="people" id="peopleRow" aria-label="People near office"></div>

    <!-- Click catcher -->
    <div class="backdropClickCatcher" id="bubbleCatcher"></div>

    <!-- Speech bubble -->
    <div class="bubble" id="bubble" role="dialog" aria-label="Location panel">
      <div class="bubbleHeader">
        <div>
          <div class="title" id="bubbleTitle">Office</div>
          <div class="small" id="bubbleSubtitle">Hiring & staffing</div>
        </div>
        <button class="bubbleClose" id="bubbleClose">Close</button>
      </div>
      <div class="bubbleBody">
        <div class="bubbleRow">
          <div class="small" id="bubbleDesc">…</div>
          <div class="pill mono" id="bubbleOwned">Owned: 0</div>
        </div>

        <div class="bubbleRow">
          <div class="pill mono" id="bubbleCost">$0</div>
          <button id="bubbleBuyBtn">Buy</button>
        </div>

        <div class="hr"></div>

        <!-- Building Level Track -->
        <div class="bubbleRow">
          <div class="pill mono sparkle" id="bubbleLevel">Building LV 1</div>
          <div class="pill mono" id="bubbleLevelIncome">+ $0.00/s</div>
        </div>
        <div class="bubbleRow">
          <div class="pill mono" id="bubbleLevelCost">$0</div>
          <button class="gold" id="bubbleLevelBtn">Upgrade Building</button>
        </div>

        <div class="small" id="bubbleLockNote" style="opacity:.85;"></div>
      </div>
    </div>

    <!-- HUD -->
    <div class="hud">
      <div class="hudInner">
        <div class="brand">
          <h1>Empire Reigns</h1>
          <div class="sub" id="status">Ready</div>
        </div>
        <div class="hudStats">
          <div class="pillHud">
            <div class="k">Cash</div>
            <div class="v mono" id="hudCash">$0</div>
          </div>
          <div class="pillHud">
            <div class="k">Income / sec</div>
            <div class="v mono" id="hudIps">$0/s</div>
          </div>
          <div class="pillHud">
            <div class="k">EP</div>
            <div class="v mono" id="hudEp">0</div>
          </div>
          <div class="pillHud">
            <div class="k">Streak</div>
            <div class="v mono" id="hudStreak">x1.00</div>
          </div>
        </div>
      </div>
    </div>

    <!-- UI Panels -->
    <div class="wrap">
      <div class="panel">
        <div class="tabs">
          <button class="tabBtn active" id="tabWorld">World</button>
          <button class="tabBtn" id="tabUpgrades">Upgrades</button>
          <button class="tabBtn" id="tabMilestones">Milestones</button>
          <button class="tabBtn" id="tabPrestige">Prestige</button>
        </div>

        <div class="panelInner">
          <div class="grid">
            <div>
              <div id="screenWorld">
                <div class="item">
                  <div class="itemTop">
                    <div class="h">Actions</div>
                    <div class="pill mono" id="ownedPill">Owned: 0</div>
                  </div>

                  <div class="small" style="margin-top:8px;">
                    Tap <b>Work</b> to build a combo streak. Click buildings to buy upgrades and upgrade building levels.
                  </div>

                  <div class="hr"></div>

                  <div class="bubbleRow">
                    <div class="pill mono" id="streakPill">Streak: x1.00</div>
                    <div class="pill mono sparkle" id="luckPill" style="display:none;">✨ Golden Ready</div>
                  </div>

                  <div class="btnRow" style="margin-top:10px;">
                    <button class="primary canBuy" id="workBtn" style="min-width:170px;">Do Work (+$1)</button>
                    <button id="quickHireBtn" style="min-width:170px;">Hire (Quick)</button>
                  </div>

                  <div class="hr"></div>

                  <div class="btnRow">
                    <button id="saveBtn">Save</button>
                    <button id="newRunBtn" title="Resets cash + upgrades, keeps EP">New Run</button>
                    <button class="danger" id="resetBtn" title="Wipes everything including EP">Hard Reset</button>
                  </div>
                </div>

                <div class="item" style="margin-top:12px;">
                  <div class="itemTop">
                    <div class="h">Multipliers</div>
                    <div class="pill mono" id="multSummary">x1.00 total</div>
                  </div>
                  <div class="small mono" id="multDetails" style="margin-top:6px;">Buildings $0/s · Ops x1.00 · Prestige x1.00</div>
                </div>

                <div class="item" style="margin-top:12px;">
                  <div class="itemTop">
                    <div class="h">Building Levels</div>
                    <div class="pill mono" id="bLvlSummary">Office 1 · Warehouse 1 · Workshop 1 · Market 1</div>
                  </div>
                  <div class="small" style="margin-top:6px;">Gates: Warehouse LV requires Office LV2 · Workshop LV requires Warehouse LV2 · Market LV requires Workshop LV2.</div>
                </div>
              </div>

              <div id="screenUpgrades" style="display:none;">
                <div class="itemTop" style="margin-bottom:10px;">
                  <div>
                    <div class="h">Upgrades</div>
                    <div class="small">Unlock in order (1 unlocks next).</div>
                  </div>
                  <div class="pill mono" id="epPill">EP: 0</div>
                </div>

                <div class="item" id="rowAssistant">
                  <div class="itemTop">
                    <div class="h">Hire an Assistant</div>
                    <div class="pill mono" id="assistantCost">$25</div>
                  </div>
                  <div class="small">+ $1.00 base income/sec per purchase. Price grows each time.</div>
                  <button id="buyAssistantBtn">Buy</button>
                </div>

                <div class="item locked" id="rowTools" style="margin-top:10px;">
                  <div class="itemTop">
                    <div class="h">Buy Better Tools</div>
                    <div class="pill mono" id="toolsCost">$60</div>
                  </div>
                  <div class="small">Multiply income by ×1.25 per purchase. Price grows each time.</div>
                  <div class="small" id="toolsLockNote">Unlocks after: 1 assistant</div>
                  <button id="buyToolsBtn" disabled>Locked</button>
                </div>

                <div class="item locked" id="rowProc" style="margin-top:10px;">
                  <div class="itemTop">
                    <div class="h">Standardize Processes</div>
                    <div class="pill mono" id="procCost">$150</div>
                  </div>
                  <div class="small">Multiply income by ×1.40 per purchase. Price grows each time.</div>
                  <div class="small" id="procLockNote">Unlocks after: 1 tools</div>
                  <button id="buyProcBtn" disabled>Locked</button>
                </div>

                <div class="item locked" id="rowAuto" style="margin-top:10px;">
                  <div class="itemTop">
                    <div class="h">Basic Automation</div>
                    <div class="pill mono" id="autoCost">$400</div>
                  </div>
                  <div class="small">Multiply income by ×2.00 per purchase. Price grows each time.</div>
                  <div class="small" id="autoLockNote">Unlocks after: 1 process</div>
                  <button id="buyAutoBtn" disabled>Locked</button>
                </div>
              </div>

              <!-- NEW: Milestones screen -->
              <div id="screenMilestones" style="display:none;">
                <div class="item">
                  <div class="itemTop">
                    <div>
                      <div class="h">Milestones</div>
                      <div class="small">Permanent bonuses. Claiming is automatic when you hit the requirement.</div>
                    </div>
                    <div class="pill mono" id="msBonusPill">Bonus x1.00</div>
                  </div>

                  <div class="hr"></div>

                  <!-- Filled by game.js once wired -->
                  <div id="msList" class="msList"></div>

                  <div class="hr"></div>
                  <div class="small" id="msNote" style="opacity:.85;">
                    If this list is empty, your game.js is not wired to milestones yet (next step).
                  </div>
                </div>
              </div>

              <div id="screenPrestige" style="display:none;">
                <div class="item">
                  <div class="itemTop">
                    <div class="h">Prestige</div>
                    <div class="pill mono" id="prestReq">$10.00K goal</div>
                  </div>
                  <div class="small" id="prestHint" style="margin-top:8px;">Reach the goal to unlock Prestige.</div>
                  <div class="btnRow" style="margin-top:10px;">
                    <button class="gold" id="prestigeBtn" disabled>Prestige (Locked)</button>
                  </div>
                  <div class="hr"></div>
                  <div class="small">Prestige resets your run but increases your permanent multiplier (EP).</div>
                </div>
              </div>
            </div>

            <div>
              <div class="item">
                <div class="itemTop">
                  <div class="h">Stats</div>
                  <div class="pill mono" id="lifetime">$0</div>
                </div>
                <div class="small" style="margin-top:8px;">
                  Lifetime earned: <span class="mono" id="lifetime2">$0</span>
                </div>
                <div class="hr"></div>
                <div class="small mono" id="statsLine">$0/s · Buildings $0/s · Ops x1.00 · Prestige x1.00</div>
              </div>

              <div class="item" style="margin-top:12px;">
                <div class="itemTop">
                  <div class="h">System</div>
                  <div class="pill mono" id="verPill">build</div>
                </div>

                <div class="toggleRow" style="margin-top:10px;">
                  <div>
                    <div class="small" style="font-weight:950; opacity:1;">Sound Effects</div>
                    <div class="small">Click / purchase / level-up / prestige / golden.</div>
                  </div>
                  <button id="sfxToggleBtn" class="toggle">SFX: ON</button>
                </div>

                <div class="small" style="margin-top:10px; opacity:.82;">
                  Tip: if audio is silent on first click, press any button once (browser unlock).
                </div>
              </div>
            </div>
          </div>

          <div class="padBottom"></div>
        </div>
      </div>
    </div>

    <div class="bottomNav">
      <div class="bottomInner">
        <button class="navBtn active" id="navWorld"><div>World</div><div class="k">Tap + build</div></button>
        <button class="navBtn" id="navUp"><div>Upgrades</div><div class="k">Spend wisely</div></button>
        <button class="navBtn" id="navMs"><div>Milestones</div><div class="k">Permanent</div></button>
        <button class="navBtn" id="navPr"><div>Prestige</div><div class="k">Reset → grow</div></button>
      </div>
    </div>

    <div class="vignette"></div>
    <div class="grain"></div>
  </div>

  <!-- NEW FILE -->
  <script src="./milestones.js?v=ER-20260109c"></script>
  <!-- Main game -->
  <script src="./game.js?v=ER-20260109c"></script>
</body>
  </html>
